<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RAG技术与应用 | 技术文档</title>
    <meta name="description" content="技术学习文档集合">
    <link rel="stylesheet" href="/assets/style.db59e0d6.css">
    <link rel="modulepreload" href="/assets/app.23d277bf.js">
    <link rel="modulepreload" href="/assets/AI_RAG.md.53c2e445.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-9c83c81e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-be9c27de></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-be9c27de> Skip to content </a><!--]--><!----><header class="VPNav" data-v-9c83c81e data-v-bd98ce1b><div class="VPNavBar has-sidebar" data-v-bd98ce1b data-v-be850364><div class="container" data-v-be850364><div class="VPNavBarTitle has-sidebar" data-v-be850364 data-v-ef6bdfee><a class="title" href="/" data-v-ef6bdfee><!--[--><!--]--><!----><!--[-->技术文档<!--]--><!--[--><!--]--></a></div><div class="content" data-v-be850364><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-be850364 data-v-4f0f7d90><span id="main-nav-aria-label" class="visually-hidden" data-v-4f0f7d90>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" data-v-4f0f7d90 data-v-d1df1d79 data-v-cbb71e82><!--[-->首页<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AI/AIGC.html" data-v-4f0f7d90 data-v-d1df1d79 data-v-cbb71e82><!--[-->文档<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-be850364 data-v-6975dfb0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-6975dfb0 data-v-a11464a8 data-v-9b61e15c><span class="check" data-v-9b61e15c><span class="icon" data-v-9b61e15c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a11464a8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a11464a8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-be850364 data-v-9d62d057 data-v-2aee37ba><!--[--><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-be850364 data-v-af83da42 data-v-0bf5642f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-0bf5642f><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-0bf5642f><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-0bf5642f><div class="VPMenu" data-v-0bf5642f data-v-958884f0><!----><!--[--><!--[--><!----><div class="group" data-v-af83da42><div class="item appearance" data-v-af83da42><p class="label" data-v-af83da42>Appearance</p><div class="appearance-action" data-v-af83da42><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-af83da42 data-v-a11464a8 data-v-9b61e15c><span class="check" data-v-9b61e15c><span class="icon" data-v-9b61e15c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a11464a8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a11464a8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-af83da42><div class="item social-links" data-v-af83da42><div class="VPSocialLinks social-links-list" data-v-af83da42 data-v-2aee37ba><!--[--><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-be850364 data-v-cd76eed2><span class="container" data-v-cd76eed2><span class="top" data-v-cd76eed2></span><span class="middle" data-v-cd76eed2></span><span class="bottom" data-v-cd76eed2></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-9c83c81e data-v-05a75127><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-05a75127><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-05a75127><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-05a75127>Menu</span></button><a class="top-link" href="#" data-v-05a75127> Return to top </a></div><aside class="VPSidebar" data-v-9c83c81e data-v-66069f15><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-66069f15><span class="visually-hidden" id="sidebar-aria-label" data-v-66069f15> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-66069f15><section class="VPSidebarGroup" data-v-66069f15 data-v-7785691c><div class="title" data-v-7785691c><h2 class="title-text" data-v-7785691c>AI</h2><div class="action" data-v-7785691c><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-7785691c><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-7785691c><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-7785691c><!--[--><!--[--><a class="VPLink link link" href="/AI/AIGC.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>AIGC</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/COZE_DIFY.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>COZE & DIFY</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/DashScope_ModelScope.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>DashScope & ModelScope</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/DDG_SERPAPI.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>DDG & SERPAPI</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/FAISS.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>FAISS</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/GPT%E6%9E%B6%E6%9E%84.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>GPT架构</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/LANGCHAIN.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>LANGCHAIN</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/LCEL.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>LCEL</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/MODELS.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>MODELS</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/MOE.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>MOE</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/NLP.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>NLP</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/QIANWEN_VL.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>QIANWEN VL</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/SERPAPI.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>SERPAPI</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/WORD2VEC.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>WORD2VEC</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>大模型应用开发模式</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/%E6%99%BA%E8%83%BD%E4%BD%93%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>智能体系统设计</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/AI/%E7%A8%A0%E5%AF%86%E5%90%91%E9%87%8F-%E7%A8%80%E7%96%8F%E5%90%91%E9%87%8F.html" style="padding-left:0px;" data-v-5686a8aa data-v-cbb71e82><!--[--><span class="link-text" data-v-5686a8aa>稠密向量-稀疏向量</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-9c83c81e data-v-954ad629><div class="VPDoc has-sidebar has-aside" data-v-954ad629 data-v-dc19973f><div class="container" data-v-dc19973f><div class="aside" data-v-dc19973f><div class="aside-curtain" data-v-dc19973f></div><div class="aside-container" data-v-dc19973f><div class="aside-content" data-v-dc19973f><div class="VPDocAside" data-v-dc19973f data-v-63938968><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-63938968 data-v-72b1abc9><div class="content" data-v-72b1abc9><div class="outline-marker" data-v-72b1abc9></div><div class="outline-title" data-v-72b1abc9>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-72b1abc9><span class="visually-hidden" id="doc-outline-aria-label" data-v-72b1abc9> Table of Contents for current page </span><ul class="root" data-v-72b1abc9 data-v-a950ca15><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-63938968></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-dc19973f><div class="content-container" data-v-dc19973f><!--[--><!--]--><main class="main" data-v-dc19973f><div style="position:relative;" class="vp-doc _AI_RAG" data-v-dc19973f><div><h1 id="rag技术与应用" tabindex="-1">RAG技术与应用 <a class="header-anchor" href="#rag技术与应用" aria-hidden="true">#</a></h1><h2 id="目录" tabindex="-1">目录 <a class="header-anchor" href="#目录" aria-hidden="true">#</a></h2><ul><li><a href="#%E4%B8%80-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F">一、大模型应用开发模式</a></li><li><a href="#%E4%BA%8C-rag%E6%A6%82%E8%BF%B0">二、RAG概述</a></li><li><a href="#%E4%B8%89-rag%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E6%B5%81%E7%A8%8B">三、RAG核心原理与流程</a></li><li><a href="#%E5%9B%9B-embedding%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9">四、Embedding模型选择</a></li><li><a href="#%E4%BA%94-rag%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B">五、RAG实战案例</a></li><li><a href="#%E5%85%AD-%E5%88%87%E7%89%87%E7%AD%96%E7%95%A5">六、切片策略</a></li><li><a href="#%E4%B8%83-rag%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BC%98%E5%8C%96">七、RAG常见问题与优化</a></li></ul><h2 id="一、大模型应用开发模式" tabindex="-1">一、大模型应用开发模式 <a class="header-anchor" href="#一、大模型应用开发模式" aria-hidden="true">#</a></h2><h3 id="提示工程-vs-rag-vs-微调" tabindex="-1">提示工程 vs RAG vs 微调 <a class="header-anchor" href="#提示工程-vs-rag-vs-微调" aria-hidden="true">#</a></h3><ul><li><strong>提示工程</strong>：通过优化输入提示来引导模型输出</li><li><strong>RAG</strong>：检索增强生成，结合外部知识库</li><li><strong>微调</strong>：在特定数据集上训练模型参数</li></ul><h3 id="选择依据" tabindex="-1">选择依据 <a class="header-anchor" href="#选择依据" aria-hidden="true">#</a></h3><ol><li><strong>提示工程</strong>：通用任务，无需特定领域知识</li><li><strong>RAG</strong>：需要最新知识、特定领域知识、减少幻觉</li><li><strong>微调</strong>：需要适应特定领域、风格或任务</li></ol><h2 id="二、rag概述" tabindex="-1">二、RAG概述 <a class="header-anchor" href="#二、rag概述" aria-hidden="true">#</a></h2><h3 id="什么是rag" tabindex="-1">什么是RAG <a class="header-anchor" href="#什么是rag" aria-hidden="true">#</a></h3><p><strong>RAG（Retrieval-Augmented Generation）</strong>：检索增强生成，结合信息检索和文本生成的技术。</p><p><strong>核心流程</strong>：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">用户问题 → 检索器 → 相关文档 → LLM生成 → 回答</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="rag的优势" tabindex="-1">RAG的优势 <a class="header-anchor" href="#rag的优势" aria-hidden="true">#</a></h3><ol><li><strong>解决知识时效性问题</strong>：可以检索最新外部知识</li><li><strong>减少模型幻觉</strong>：引入外部知识减少虚假信息</li><li><strong>提升专业领域回答质量</strong>：结合垂直领域知识库</li></ol><h2 id="三、rag核心原理与流程" tabindex="-1">三、RAG核心原理与流程 <a class="header-anchor" href="#三、rag核心原理与流程" aria-hidden="true">#</a></h2><h3 id="step1-数据预处理" tabindex="-1">Step1：数据预处理 <a class="header-anchor" href="#step1-数据预处理" aria-hidden="true">#</a></h3><ol><li><strong>知识库构建</strong>：收集整理多源数据</li><li><strong>文档分块</strong>：切分为适当大小的片段</li><li><strong>向量化处理</strong>：使用嵌入模型转换为向量</li></ol><h3 id="step2-检索阶段" tabindex="-1">Step2：检索阶段 <a class="header-anchor" href="#step2-检索阶段" aria-hidden="true">#</a></h3><ol><li><strong>查询处理</strong>：将问题转换为向量</li><li><strong>相似度检索</strong>：在向量数据库中搜索</li><li><strong>重排序</strong>：对检索结果进行相关性排序</li></ol><h3 id="step3-生成阶段" tabindex="-1">Step3：生成阶段 <a class="header-anchor" href="#step3-生成阶段" aria-hidden="true">#</a></h3><ol><li><strong>上下文组装</strong>：组合检索结果和用户问题</li><li><strong>生成回答</strong>：LLM基于增强上下文生成答案</li></ol><h2 id="四、embedding模型选择" tabindex="-1">四、Embedding模型选择 <a class="header-anchor" href="#四、embedding模型选择" aria-hidden="true">#</a></h2><h3 id="常见embedding模型" tabindex="-1">常见Embedding模型 <a class="header-anchor" href="#常见embedding模型" aria-hidden="true">#</a></h3><table><thead><tr><th>类别</th><th>模型</th><th>特点</th><th>适用场景</th></tr></thead><tbody><tr><td>通用文本嵌入</td><td>BGE-M3</td><td>支持100+语言，8192 tokens</td><td>跨语言长文档检索</td></tr><tr><td>中文嵌入</td><td>xiaobu-embedding-v2</td><td>针对中文语义优化</td><td>中文文本分类、语义检索</td></tr><tr><td>指令驱动</td><td>gte-Qwen2-7B-instruct</td><td>支持代码与文本跨模态检索</td><td>复杂指令驱动任务</td></tr><tr><td>企业级</td><td>BGE-M3</td><td>支持混合检索</td><td>企业级语义检索</td></tr></tbody></table><h3 id="embedding榜单" tabindex="-1">Embedding榜单 <a class="header-anchor" href="#embedding榜单" aria-hidden="true">#</a></h3><p>完整榜单见Hugging Face：<a href="https://huggingface.co/spaces/mteb/leaderboard" target="_blank" rel="noreferrer">https://huggingface.co/spaces/mteb/leaderboard</a></p><h2 id="五、rag实战案例" tabindex="-1">五、RAG实战案例 <a class="header-anchor" href="#五、rag实战案例" aria-hidden="true">#</a></h2><h3 id="案例1-deepseek-faiss本地知识库检索" tabindex="-1">案例1：DeepSeek + Faiss本地知识库检索 <a class="header-anchor" href="#案例1-deepseek-faiss本地知识库检索" aria-hidden="true">#</a></h3><p><strong>技术栈</strong>：</p><ul><li>向量数据库：Faiss</li><li>嵌入模型：阿里云DashScope text-embedding-v1</li><li>LLM：deepseek-v3</li><li>文档处理：PyPDF2</li></ul><p><strong>实现步骤</strong>：</p><ol><li><strong>文档预处理</strong>：提取PDF文本并记录页码</li><li><strong>文本分割</strong>：使用RecursiveCharacterTextSplitter</li><li><strong>向量化</strong>：生成嵌入向量</li><li><strong>构建索引</strong>：创建Faiss向量数据库</li><li><strong>检索问答</strong>：相似度搜索 + LLM生成答案</li></ol><h3 id="案例2-迪士尼rag助手" tabindex="-1">案例2：迪士尼RAG助手 <a class="header-anchor" href="#案例2-迪士尼rag助手" aria-hidden="true">#</a></h3><p><strong>技术选型</strong>：</p><ul><li>文档处理：PyMuPDF（PDF）、python-docx（Word）、pytesseract（OCR）</li><li>Embedding模型：text-embedding-v4（文本）、CLIP（图像）</li><li>向量数据库：FAISS</li><li>LLM：Qwen-turbo</li></ul><p><strong>特色功能</strong>：</p><ol><li><strong>多模态处理</strong>：支持文本、图片、表格</li><li><strong>混合检索策略</strong>：文本+图像并行检索</li><li><strong>关键词触发</strong>：检测&quot;海报&quot;、&quot;图片&quot;等触发图像检索</li></ol><h2 id="六、切片策略" tabindex="-1">六、切片策略 <a class="header-anchor" href="#六、切片策略" aria-hidden="true">#</a></h2><h3 id="_5种常用切片策略" tabindex="-1">5种常用切片策略 <a class="header-anchor" href="#_5种常用切片策略" aria-hidden="true">#</a></h3><table><thead><tr><th>策略</th><th>特点</th><th>优点</th><th>缺点</th><th>适用场景</th></tr></thead><tbody><tr><td>改进的固定长度切片</td><td>优先句子边界，有重叠</td><td>实现简单，处理快</td><td>语义可能被切断</td><td>技术文档、规范文件</td></tr><tr><td>语义切片</td><td>按句子、段落切分</td><td>语义保持好</td><td>长度不均匀</td><td>自然语言文本</td></tr><tr><td>LLM语义切片</td><td>利用LLM智能切分</td><td>语义理解强</td><td>成本高，依赖GPU</td><td>高质量要求场景</td></tr><tr><td>层次切片</td><td>基于文档结构切分</td><td>保持文档结构</td><td>依赖文档格式</td><td>结构化文档</td></tr><tr><td>滑动窗口切片</td><td>固定窗口滑动重叠</td><td>保持上下文连续性</td><td>产生大量重叠</td><td>长文档处理</td></tr></tbody></table><h3 id="策略对比" tabindex="-1">策略对比 <a class="header-anchor" href="#策略对比" aria-hidden="true">#</a></h3><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># 示例：改进的固定长度切片</span></span>
<span class="line"><span style="color:#A6ACCD;">text_splitter </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RecursiveCharacterTextSplitter</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">separators</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\n\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">chunk_size</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">chunk_overlap</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">length_function</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="七、rag常见问题与优化" tabindex="-1">七、RAG常见问题与优化 <a class="header-anchor" href="#七、rag常见问题与优化" aria-hidden="true">#</a></h2><h3 id="数据准备阶段问题" tabindex="-1">数据准备阶段问题 <a class="header-anchor" href="#数据准备阶段问题" aria-hidden="true">#</a></h3><p><strong>问题</strong>：</p><ul><li>数据质量差：敏感、过时、矛盾信息</li><li>多模态信息提取困难</li><li>PDF解析复杂</li></ul><p><strong>优化方案</strong>：</p><ol><li><p><strong>构建完整的数据准备流程</strong></p><ul><li>数据评估与分类</li><li>数据清洗（去重、纠错、更新）</li><li>敏感信息处理</li><li>数据标记与标注</li><li>建立数据治理框架</li></ul></li><li><p><strong>智能文档技术</strong></p><ul><li>使用Apache POI、OCR、XML/PDF Parser</li><li>多模态文档理解</li><li>版面分析、信息抽取</li></ul></li></ol><h3 id="知识检索阶段问题" tabindex="-1">知识检索阶段问题 <a class="header-anchor" href="#知识检索阶段问题" aria-hidden="true">#</a></h3><p><strong>问题</strong>：</p><ul><li>内容缺失：检索不完整</li><li>错过排名靠前文档：k值选择不当</li></ul><p><strong>优化方案</strong>：</p><ol><li><p><strong>查询转换澄清用户意图</strong></p><ul><li>意图识别</li><li>查询扩展</li><li>细化检索条件</li></ul></li><li><p><strong>混合检索和重排策略</strong></p><ul><li>关键词检索 + 语义检索</li><li>多路召回（向量召回、搜索召回）</li><li>重排序提高准确性</li></ul></li></ol><h3 id="答案生成阶段问题" tabindex="-1">答案生成阶段问题 <a class="header-anchor" href="#答案生成阶段问题" aria-hidden="true">#</a></h3><p><strong>问题</strong>：</p><ul><li>未提取：上下文存在但未提取</li><li>不完整：信息缺失</li><li>格式错误：指令格式问题</li><li>幻觉：生成虚假信息</li></ul><p><strong>优化方案</strong>：</p><ol><li><p><strong>改进提示词模板</strong></p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"># 优化前</span></span>
<span class="line"><span style="color:#A6ACCD;">根据以下上下文回答问题：如何申请信用卡？</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 优化后</span></span>
<span class="line"><span style="color:#A6ACCD;">根据以下上下文，提取与申请信用卡相关的具体步骤和所需材料：如何申请信用卡？</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></li><li><p><strong>实施动态防护栏</strong></p><ul><li>事实性校验规则</li><li>参考文献验证机制</li><li>格式验证和完整性检查</li></ul></li></ol><h3 id="企业实践案例" tabindex="-1">企业实践案例 <a class="header-anchor" href="#企业实践案例" aria-hidden="true">#</a></h3><ol><li><strong>阿里云</strong>：多粒度知识提取，按照标题级别拆分文档</li><li><strong>哈啰出行</strong>：多路召回（向量召回+搜索召回）</li><li><strong>中国移动</strong>：FORAG两阶段生成策略（先大纲后扩展）</li></ol><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-hidden="true">#</a></h2><h3 id="rag的价值" tabindex="-1">RAG的价值 <a class="header-anchor" href="#rag的价值" aria-hidden="true">#</a></h3><p>即使LLM能够处理无限上下文，RAG仍有重要价值：</p><ol><li><strong>效率与成本</strong>：减少输入长度，降低计算消耗</li><li><strong>知识更新</strong>：连接外部实时知识库</li><li><strong>可解释性</strong>：检索过程透明，可追溯来源</li><li><strong>定制化</strong>：针对特定领域优化检索系统</li><li><strong>数据隐私</strong>：支持本地或私有数据源</li></ol></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-dc19973f data-v-5440e431><!----><div class="prev-next" data-v-5440e431><div class="pager" data-v-5440e431><!----></div><div class="pager" data-v-5440e431><a class="pager-link next" href="/AI/AIGC.html" data-v-5440e431><span class="desc" data-v-5440e431>Next page</span><span class="title" data-v-5440e431>AIGC</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-9c83c81e data-v-0bba5d65><div class="container" data-v-0bba5d65><p class="message" data-v-0bba5d65>技术文档集合</p><p class="copyright" data-v-0bba5d65>Copyright © 2024</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ai_aigc.md\":\"c144be74\",\"ai_coze_dify.md\":\"8e6f38d8\",\"ai_ddg_serpapi.md\":\"5f39c7da\",\"ai_dashscope_modelscope.md\":\"5a39b6cc\",\"ai_faiss.md\":\"77709cbb\",\"ai_gpt架构.md\":\"e83afa7b\",\"ai_langchain.md\":\"97f283e3\",\"ai_lcel.md\":\"b1965b74\",\"ai_models.md\":\"19abd159\",\"ai_moe.md\":\"d6fd459f\",\"ai_nlp.md\":\"2e14501e\",\"ai_qianwen_vl.md\":\"ea34516b\",\"ai_rag.md\":\"53c2e445\",\"ai_serpapi.md\":\"b6c6b59b\",\"ai_transformer.md\":\"f6af52be\",\"ai_word2vec.md\":\"0edbca57\",\"ai_大模型应用开发模式.md\":\"6fa71c08\",\"ai_智能体系统设计.md\":\"abb6a42e\",\"ai_稠密向量-稀疏向量.md\":\"04d32546\",\"index.md\":\"31bd7a35\"}")</script>
    <script type="module" async src="/assets/app.23d277bf.js"></script>
    
  </body>
</html>